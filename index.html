<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lançador de Chats - Kick</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #121212;
            color: #ffffff;
            margin: 0;
            padding: 15px;
            font-size: 16px;
        }
        .header { text-align: center; border-bottom: 1px solid #333; padding-bottom: 15px; margin-bottom: 20px; }
        h1 { color: #00ff7f; margin: 0; }
        p { margin: 5px 0 0 0; color: #aaa; }
        #controls { display: flex; justify-content: center; align-items: center; margin-bottom: 20px; gap: 10px; }
        #streamerInput { padding: 10px; border-radius: 5px; border: 1px solid #333; background-color: #222; color: #fff; width: 250px; }
        #addChatBtn { padding: 10px 15px; border: none; background-color: #00ff7f; color: #111; font-weight: bold; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        #addChatBtn:hover { background-color: #00e673; }
        #launcher-container { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; padding: 10px; }
        .channel-launcher {
            background-color: #2a2a2a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 300px;
        }
        .channel-name { font-weight: bold; font-size: 1.1em; color: #eee; }
        .launch-btn { background-color: #00ff7f; color: #111; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .close-btn { background-color: #ff4d4d; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; font-weight: bold; margin-left: 10px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>Lançador de Chats da Kick</h1>
        <p>Adicione canais e clique para abrir o chat em uma nova janela.</p>
    </div>
    
    <div id="controls">
        <input type="text" id="streamerInput" placeholder="Nome do canal...">
        <button id="addChatBtn">Adicionar</button>
    </div>

    <div id="launcher-container">
        </div>

    <script>
        const streamerInput = document.getElementById('streamerInput');
        const addChatBtn = document.getElementById('addChatBtn');
        const launcherContainer = document.getElementById('launcher-container');

        function loadChannels() {
            const savedChannels = JSON.parse(localStorage.getItem('kickLaunchers')) || [];
            savedChannels.forEach(channelName => createLauncherElement(channelName));
        }

        function saveChannels() {
            const currentChannels = Array.from(document.querySelectorAll('.channel-launcher'))
                                         .map(launcher => launcher.dataset.channel);
            localStorage.setItem('kickLaunchers', JSON.stringify(currentChannels));
        }

        function createLauncherElement(channelName) {
            if (document.querySelector(`.channel-launcher[data-channel="${channelName}"]`)) {
                alert(`O canal ${channelName} já está na lista.`);
                return false;
            }

            const launcherWrapper = document.createElement('div');
            launcherWrapper.className = 'channel-launcher';
            launcherWrapper.dataset.channel = channelName;

            const nameSpan = document.createElement('span');
            nameSpan.className = 'channel-name';
            nameSpan.textContent = channelName;

            const buttonWrapper = document.createElement('div');

            const launchBtn = document.createElement('button');
            launchBtn.className = 'launch-btn';
            launchBtn.textContent = 'Abrir Chat';
            launchBtn.onclick = function() {
                const chatUrl = `https://kick.com/${channelName}/chatroom`;
                // Abre em uma nova janela pop-up com tamanho definido
                window.open(chatUrl, `_blank`, 'width=400,height=600,resizable=yes,scrollbars=yes');
            };

            const closeBtn = document.createElement('button');
            closeBtn.className = 'close-btn';
            closeBtn.textContent = 'X';
            closeBtn.onclick = function() {
                launcherContainer.removeChild(launcherWrapper);
                saveChannels();
            };
            
            buttonWrapper.appendChild(launchBtn);
            buttonWrapper.appendChild(closeBtn);
            launcherWrapper.appendChild(nameSpan);
            launcherWrapper.appendChild(buttonWrapper);
            launcherContainer.appendChild(launcherWrapper);
            
            return true;
        }

        function addNewChannel() {
            const streamerName = streamerInput.value.trim().toLowerCase();
            if (streamerName === '') {
                alert('Por favor, digite o nome de um canal.');
                return;
            }
            if (createLauncherElement(streamerName)) {
                saveChannels();
            }
            streamerInput.value = '';
        }

        addChatBtn.addEventListener('click', addNewChannel);
        streamerInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') addNewChannel();
        });

        document.addEventListener('DOMContentLoaded', loadChannels);
    </script>

</body>
</html>
